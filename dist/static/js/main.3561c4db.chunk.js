(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,n){e.exports=n(94)},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(13),i=n(8),u=n(2),s=n(18),m=n.n(s),d=n(12),f=n.n(d),E=n(6),g=n(7),b=function(e){var t=e.title,n=e.description,a=e.createdAt,o=e.userHandle,c=e.id,l=e.blogId,i=e.userImageUrl,u=e.imageUrl;return r.a.createElement("div",{className:"list-card"+("/myblogs"===le.location.pathname||le.location.pathname.includes("/user")?" my-blogs__list-card":"")},r.a.createElement("div",{className:"list-card__body"},r.a.createElement("div",{className:"list-card__image"},r.a.createElement("img",{src:u,alt:""})),r.a.createElement("div",{className:"list-card__content"},r.a.createElement(f.a,{className:"list-card__body-title",to:"/blog/".concat(c||l)},t,r.a.createElement("div",{className:"list-card__body-author"},r.a.createElement("img",{src:i,alt:""}),r.a.createElement("h3",null,o)),r.a.createElement("div",null,r.a.createElement("p",{className:"list-card__content-text"},n.substring(0,350)+"...")))),r.a.createElement("div",{className:"list-card__body-date"},r.a.createElement("div",null,r.a.createElement("h5",null,m()(a).format("Do")),r.a.createElement("h6",null,m()(a).format("MMMM")+" "+m()(a).format("YYYY"))),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.a,{icon:E.f,size:"2x"})),r.a.createElement("li",null,r.a.createElement(g.a,{icon:E.e,size:"2x"})),r.a.createElement("li",null,r.a.createElement(g.a,{icon:E.j,size:"2x"}))))),r.a.createElement("div",{className:"list-card__fab"},r.a.createElement(f.a,{to:"/blog/".concat(c||l)},r.a.createElement(g.a,{icon:E.a,color:"white",size:"3x"}))))},h=function(e,t){var n=t.text,a=t.sortBy;return e.filter(function(e){return e.title.toLowerCase().includes(n.toLowerCase())}).sort(function(e,t){return"likes"===a?e.likes<t.likes?1:-1:"date"===a?e.createdAt<t.createdAt?1:-1:void 0})},p=Object(u.b)(function(e){return{blogs:h(e.blogs,e.filters),userImage:e.auth.user?e.auth.user.imageUrl:""}})(function(e){return r.a.createElement("div",{className:"list"},0===e.blogs.length?r.a.createElement("p",null,"No blogs"):e.blogs.map(function(e){return r.a.createElement(b,Object.assign({key:e.id},e))}))}),v=Object(u.b)(function(e){return{filters:e.filters}})(function(e){return r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group__item"},r.a.createElement("input",{type:"text",placeholder:"Search Blog",value:e.filters.text,onChange:function(t){e.dispatch(function(){return{type:"ADD_TEXT_FILTER",text:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}(t.target.value))}})),r.a.createElement("div",{className:"input-group__item"},r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"item"},r.a.createElement("input",{type:"radio",id:"male",name:"gender",value:"male",checked:"likes"===e.filters.sortBy,onChange:function(){e.dispatch({type:"SORT_BY_LIKES"})}}),r.a.createElement("label",{title:"Sort by Likes",htmlFor:"male"},r.a.createElement(g.a,{icon:E.f}))),r.a.createElement("div",{className:"item"},r.a.createElement("input",{type:"radio",id:"female",name:"gender",value:"female",checked:"date"===e.filters.sortBy,onChange:function(){e.dispatch({type:"SORT_BY_DATE"})}}),r.a.createElement("label",{title:"Recent",htmlFor:"female"},r.a.createElement(g.a,{icon:E.k}))))))}),O=n(3),_=n(4),y=n.n(_),N=function(){return function(e){return y.a.get("/blogs").then(function(t){e({type:"SET_BLOGS",blogs:t.data})})}},w=n(31),j=n.n(w),S=n(45);function U(e){var t="Bearer ".concat(e);sessionStorage.setItem("FBIdToken",t),y.a.defaults.headers.common.Authorization=t}var I=function(){return function(e){return y.a.get("/userHandle").then(function(){var t=Object(S.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"GET_USERHANDLE",userHandle:n.data}),t.next=3,sessionStorage.setItem("userHandle",n.data);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){return console.log(e.response)})}},k=function(){return function(e){return y.a.get("/user").then(function(t){var n,a,r;e((n=t.data.credentials,a=t.data.notifications,r=t.data.follows,{type:"GET_AUTHENTICATED_USER",user:n,notifications:a,follows:r}))}).catch(function(e){return console.log(e.response)})}},L=Object(u.b)(function(e,t){return{isFollowing:e.auth.follows.following.find(function(e){return e!==t.userHandle}),currentUserHandle:e.auth.user.userHandle}},function(e){return{followUser:function(t){return e(function(e){return function(t){return y.a.post("../follow",{recipient:e}).then(function(e){return e.data}).catch(function(e){e.response&&alert(e.response.data),console.log(e)})}}(t))},unfollowUser:function(t){return e(function(e){return function(t){return y.a.post("../unfollow",{recipient:e}).then(function(e){return e.data}).catch(function(e){e.response&&alert(e.response.data),console.log(e)})}}(t))},getFollows:function(t){return e((n=t,function(e){return y.a.get("../getFollows/".concat(n)).then(function(e){return e.data}).catch(function(e){e.response&&console.log(e)})}));var n}}})(function(e){e.name;var t=e.userHandle,n=e.imageUrl,o=e.followUser,c=e.unfollowUser,l=e.getFollows,i=e.isFollowing,u=e.currentUserHandle,s=Object(a.useState)([]),m=Object(O.a)(s,2),d=m[0],b=m[1],h=Object(a.useState)([]),p=Object(O.a)(h,2),v=p[0],_=p[1],y=Object(a.useState)(!!i),N=Object(O.a)(y,2),w=N[0],j=N[1];Object(a.useEffect)(function(){l(t).then(function(e){b(e.followers.length),_(e.following.length)})},[]);return r.a.createElement("div",{className:"famous-card__body-content"},r.a.createElement("div",{className:"famous-card__body-image"},r.a.createElement("div",null,r.a.createElement("img",{src:n,alt:""})),t!==u?r.a.createElement("div",{className:"famous-card__body-content-button"},w?r.a.createElement("button",{onClick:function(){c(t),j(!1),b(d-1)}},"Unfollow ",r.a.createElement(g.a,{icon:E.g,color:"white"})):r.a.createElement("button",{className:"follow",onClick:function(){o(t),j(!0),b(d+1)}},"Follow ",r.a.createElement(g.a,{icon:E.i,color:"white"}))):""),r.a.createElement("div",null,r.a.createElement("div",{className:"famous-card__body-content-title"},r.a.createElement(f.a,{to:"/user/".concat(t)},r.a.createElement("h3",null,t),r.a.createElement("h4",null,"vinay nair"))),r.a.createElement("div",{className:"famous-card__body-content-follows"},"followers:",d,"   following:",v)))}),C=Object(u.b)(void 0,function(e){return{getFamousUser:function(){return e(function(e){return y.a.get("../famousUser").then(function(e){return e.data}).catch(function(e){e.response&&alert(e.response.data),console.log(e)})})}}})(function(e){var t=e.getFamousUser,n=Object(a.useState)([]),o=Object(O.a)(n,2),c=o[0],l=o[1];return Object(a.useEffect)(function(){t().then(function(e){l(e)})},[]),r.a.createElement("div",{className:"famous-card__body"},r.a.createElement("div",{className:"famous-card__body-heading"},"Top Bloggers"),0===c.length?r.a.createElement("p",null,"loading"):c.map(function(e){return r.a.createElement(L,Object.assign({key:e.userId},e))}))}),D=function(){return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"blog-card"},r.a.createElement(p,null)),r.a.createElement("div",{className:"famous-card"},r.a.createElement(C,null))))},B=n(46),T=n(47),A=n(51),R=n(48),G=n(52),x=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(A.a)(this,Object(R.a)(t).call(this,e))).onTitleChange=function(e){var t=e.target.value;n.setState(function(){return{title:t}})},n.onDescriptionChange=function(e){var t=e.target.value;n.setState(function(){return{description:t}})},n.handleEditPicture=function(){document.getElementById("imageChange").click()},n.onImageChange=function(e){var t=e.target.files[0];n.formData.append("image",t,t.name)},n.onSubmit=function(e){e.preventDefault(),n.state.title&&n.state.description?(n.setState(function(){return{error:""}}),n.formData.append("title",n.state.title),n.formData.append("description",n.state.description),n.props.onSubmit(n.formData)):n.setState(function(){return{error:"Please provide title and content."}})},n.formData=new FormData,n.state={title:e.blog?e.blog.title:"",description:e.blog?e.blog.description:"",imageUrl:e.blog?e.blog.imageUrl:"",error:""},n}return Object(G.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.blog.imageUrl&&r.a.createElement("div",{className:"form-image-exist"},r.a.createElement("img",{src:this.props.blog.imageUrl,alt:""})),r.a.createElement("div",{className:"form-image"},r.a.createElement("p",null,this.props.blog.imageUrl?"edit image":"add an image"),r.a.createElement("input",{type:"file",hidden:"hidden",name:"",id:"imageChange",onChange:this.onImageChange}),r.a.createElement("button",{className:"button-secondary",onClick:this.handleEditPicture},"change")),r.a.createElement("form",{className:"form",action:"",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Enter the title here",className:"form-title",value:this.state.title,onChange:this.onTitleChange}),r.a.createElement("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"your content",value:this.state.description,onChange:this.onDescriptionChange}),r.a.createElement("div",null,r.a.createElement("button",null,"Post"))))}}]),t}(a.Component),H=Object(u.b)(void 0,function(e){return{addBlog:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&arguments[1],function(t,n){y.a.post("../../add",e).then(function(e){t({type:"ADD_BLOG",blog:e.data})}).catch(function(e){console.log(e.response)})}}(t))}}})(function(e){var t=e.addBlog,n=e.history;return r.a.createElement("div",null,r.a.createElement("div",{className:"content-container"},r.a.createElement(x,{onSubmit:function(e){t(e),n.push("/")}})))}),M=Object(u.b)(function(e,t){return{blog:e.blogs.find(function(e){return e.id===t.match.params.id})}},function(e){return{editBlog:function(t,n){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){y.a.post("../../blog/".concat(e,"/edit"),t).then(function(a){return n(function(e,t){return{type:"EDIT_BLOG",id:e,update:t}}(e,t)),le.goBack(),a.data})}}(t,n))},removeBlog:function(t){return e(function(e){return function(t,n){y.a.delete("../../blog/".concat(e,"/delete")).then(function(n){t(function(e){return{type:"REMOVE_BLOG",id:e}}(e)),window.alert(n.data.success),le.push("/dashboard")})}}(t))}}})(function(e){return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete this blog?")&&e.removeBlog(e.blog.id)}},"Remove"),r.a.createElement(x,{onSubmit:function(t){e.editBlog(e.blog.id,t)},blog:e.blog}))}),F=n(11),Y=function(){return r.a.createElement("div",null,"404 - ",r.a.createElement(F.a,{to:"/"},"Go home"))},P=n(24),K=n.n(P),z=n(25),V=n.n(z),W=Object(u.b)(function(e){return{error:e.auth.error,loading:e.auth.loading}},function(e){return{startLoginUsingGoogle:function(){return e(function(){y.a.post("/signin").catch(function(e){console.log(e)})})},startLogin:function(t){return e(function(e){return function(t){return t({type:"LOADING_UI"}),y.a.post("/login",e).then(function(e){U(e.data.token),t(I()).then(function(){t(k()).then(function(){t({type:"LOGIN"})}),t(N()).then(function(){t({type:"UNLOADING_UI"})})})}).catch(function(e){t({type:"SET_ERRORS",error:e.response?e.response.data.general||e.response.data.err:""})})}}(t))},unsetError:function(){return e({type:"SET_ERRORS",error:""})}}})(function(e){var t=e.startLogin,n=e.error,o=e.unsetError,c=e.loading,l=Object(a.useState)(""),i=Object(O.a)(l,2),u=i[0],s=i[1],m=Object(a.useState)(""),d=Object(O.a)(m,2),E=d[0],g=d[1];return r.a.createElement("div",{className:"box-layout"},c&&r.a.createElement("div",{class:"spinner"}),r.a.createElement("div",{className:"box-layout__box animated fadeInDown delay-1s"},r.a.createElement(V.a,{className:"Tilt",options:{max:25}},r.a.createElement("h1",{className:"box-layout__title animated flash delay-2s"},"Blogacy")),r.a.createElement("h2",{className:"box-layout__subtitle"},"Read, Write and Grow"),r.a.createElement("div",{className:"box-layout__form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),K()(u)&&t({email:u,password:E}).then(function(){})}},r.a.createElement("input",{type:"email",value:u,onChange:function(e){return s(e.target.value)},placeholder:"email",className:"animated fadeInLeft delay-2s"}),r.a.createElement("input",{type:"password",value:E,onChange:function(e){return g(e.target.value)},placeholder:n?r.a.createElement("p",null,n):"password",className:"animated fadeInRight delay-2s"}),r.a.createElement("button",{className:"button button-primary"},"Login")),n&&(n&&alert(n),void o()),r.a.createElement("h6",{className:"box-layout__question animated infinite pulse"},"Not Registered?")," ",r.a.createElement(f.a,{to:"/signup"},r.a.createElement("button",{className:"button button-secondary"},"Sign Up")))))}),X=Object(u.b)(function(e){return{userHandle:e.auth.userHandle,blogs:e.auth.userBlogs?e.auth.userBlogs:[]}},function(e){return{getUserBlogs:function(t){return e(function(e){return function(t){return t({type:"LOADING_UI"}),y.a.get("/user/".concat(e)).then(function(e){var n=e.data;t({type:"GET_USER_BLOGS",blogs:n.blogs}),t({type:"UNLOADING_UI"})}).catch(function(e){return console.log(e.response)})}}(t))}}})(function(e){return Object(a.useEffect)(function(){console.log("hey"),e.getUserBlogs(e.handle||e.userHandle)},[]),r.a.createElement(r.a.Fragment,null,0===e.blogs.length?r.a.createElement("p",null,"no blogs.."):e.blogs.map(function(e){return r.a.createElement(b,Object.assign({key:e.id},e))}))}),J=Object(u.b)(function(e,t){return{user:t.handle?"":e.auth.user,follows:e.auth.follows}},function(e){return{getUserDetails:function(t){return e((n=t,function(e){return e({type:"LOADING_UI"}),y.a.get("/user/".concat(n)).then(function(t){var n=t.data;console.log(n);var a={user:n.user,follows:n.follows};return e({type:"UNLOADING_UI"}),a}).catch(function(e){return console.log(e.response)})}));var n}}})(function(e){var t=e.user,n=e.handle,o=e.getUserDetails,c=e.follows,l=Object(a.useState)([]),i=Object(O.a)(l,2),u=i[0],s=i[1],m=Object(a.useState)([]),d=Object(O.a)(m,2),f=d[0],E=d[1],g=Object(a.useState)([]),b=Object(O.a)(g,2),h=b[0],p=b[1];return Object(a.useEffect)(function(){n&&o(n).then(function(e){s(e.user),E(e.follows.followers),p(e.follows.following)})},[]),r.a.createElement("div",{className:"my-blogs__user-card"},r.a.createElement("img",{src:u.imageUrl||t.imageUrl,alt:""}),r.a.createElement("h2",null,u.name&&u.name||t.name&&t.name),r.a.createElement("h3",null,"userHandle: ",u.userHandle||t.userHandle),r.a.createElement("h3",null,"Followers:",f.length||c.followers.length),r.a.createElement("h3",null,"Following:",h.length||c.following.length),u.bio&&r.a.createElement("h3",null,"bio: ",u.bio)||t.bio&&r.a.createElement("h3",null,"bio: ",t.bio),r.a.createElement("div",null,r.a.createElement("label",null,"website: "),u.website&&r.a.createElement("a",{href:u.website,alt:""},u.website)||t.website&&r.a.createElement("a",{href:t.website,alt:""},t.website)),r.a.createElement(F.a,{to:"edit"},r.a.createElement("button",null,"Edit Profile")))}),q=function(e){return r.a.createElement("div",{className:"my-blogs"},r.a.createElement("div",{className:"my-blogs__blogs"},r.a.createElement(X,{handle:e.match.params.handle})),r.a.createElement("div",{className:"my-blogs__user"},r.a.createElement(J,{handle:e.match.params.handle})))},$=n(26),Q=Object(u.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(function(e){var t=e.isAuthenticated,n=e.component,a=Object($.a)(e,["isAuthenticated","component"]);return r.a.createElement(l.Route,Object.assign({},a,{component:function(e){return t?r.a.createElement(l.Redirect,{to:"/dashboard"}):r.a.createElement(n,e)}}))}),Z=Object(u.b)(function(e){return{notifications:e.auth.notifications,userHandle:e.auth.userHandle}},function(e){return{logout:function(){return e(function(e){sessionStorage.removeItem("FBIdToken"),sessionStorage.removeItem("userHandle"),delete y.a.defaults.headers.common.Authorization,e({type:"LOGOUT"})})}}})(function(e){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),o=n[0],c=n[1];return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__content"},r.a.createElement("div",null,r.a.createElement(F.a,{to:"/dashboard",className:"header__title"},r.a.createElement("h1",null,"Bloggy"))),r.a.createElement("div",{className:"header__links"},r.a.createElement("input",{type:"checkbox",id:"toggler"}),r.a.createElement("div",{id:"hamburger"},r.a.createElement("div",null)),r.a.createElement("div",{id:"menu"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(F.b,{to:"/add",activeClassName:"is-active"},r.a.createElement(g.a,{icon:E.i})," Add Blog"),r.a.createElement(F.b,{to:"/myblogs",activeClassName:"is-active"},r.a.createElement(g.a,{icon:E.c})," My Blogs"),r.a.createElement("button",{onClick:function(){c(!o)}},r.a.createElement(g.a,{icon:E.b,className:"header__notification-button"})),r.a.createElement("button",{onClick:e.logout,className:"button-logout"},"Logout")))))),o&&r.a.createElement("ul",null,e.notifications.map(function(e){var t=e.blogId?"/blog/"+e.blogId:"/dashboard";return r.a.createElement(F.a,{to:t},r.a.createElement("li",null,e.sender," ","like"===e.type?"liked":"commented on"," your blog"))}))))}),ee=Object(u.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(function(e){e.login;var t=e.isAuthenticated,n=e.component,a=Object($.a)(e,["login","isAuthenticated","component"]);return r.a.createElement(l.Route,Object.assign({},a,{component:function(e){return!0===t?r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(n,e)):r.a.createElement(l.Redirect,{to:"/"})}}))}),te=Object(u.b)(void 0,function(e){return{addComment:function(t,n){return e(function(e,t){return function(n){return y.a.post("../blog/".concat(e,"/comment"),t).then(function(e){n(function(){return{type:"ADD_COMMENT",comment:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(e.data))})}}(t,n))}}})(function(e){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(""),i=Object(O.a)(l,2),u=i[0],s=i[1],m=function(){c(!o)};return r.a.createElement("div",null,r.a.createElement("button",{onClick:m},"Add Comment"),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:u,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{onClick:function(){e.addComment(e.id,{comment:u}),m(),s("")}},"Add")))}),ne=Object(u.b)(function(e){return{comments:e.comments}},function(e){return{getComments:function(t){return e((n=t,function(e){return y.a.get("../blog/".concat(n,"/comments")).then(function(t){return e({type:"GET_COMMENTS",comments:t.data}),t.data})}));var n}}})(function(e){var t=e.comments,n=e.getComments,o=e.id,c=Object(a.useState)(!1),l=Object(O.a)(c,2),i=l[0],u=l[1];Object(a.useEffect)(function(){n(o)},[]);return r.a.createElement("div",null,r.a.createElement(te,{id:o}),r.a.createElement("button",{disabled:0===t.length,onClick:function(){u(!i)}},i?"close comments":"View all ".concat(0===t.length?"":t.length," comments")),i&&r.a.createElement("ul",null,"comments:",t.map(function(e){return r.a.createElement("li",null,e.userHandle,":",e.body)})))}),ae=Object(u.b)(function(e,t){return{blog:e.blogs.find(function(e){return e.id===t.match.params.id}),userHandle:e.auth.userHandle,checkLike:e.auth.checkLike}},function(e){return{likeBlog:function(t){return e(function(e){return function(t){return y.a.post("".concat(e,"/like")).then(function(n){t({type:"LIKE_BLOG",id:e})}).catch(function(e){e.response&&alert(e.response.data.error),console.log(e)})}}(t))},unLikeBlog:function(t){return e(function(e){return function(t){return y.a.post("".concat(e,"/unlike")).then(function(n){t({type:"UNLIKE_BLOG",id:e})}).catch(function(e){e.response&&alert(e.response.data.error),console.log(e)})}}(t))},checkLikeBlog:function(t){return e(function(e){return function(t){return y.a.get("".concat(e,"/checkLike")).then(function(e){t({type:"CHECK_LIKE_BLOG",condition:e.data})}).catch(function(e){e.response&&alert(e.response.data),console.log(e)})}}(t))}}})(function(e){var t=Object(a.useState)(e.blog.likeCount),n=Object(O.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(e.checkLike),i=Object(O.a)(l,2),u=i[0],s=i[1],d=e.match.params.id;Object(a.useEffect)(function(){e.checkLikeBlog(d),console.log(u)},[o]);return r.a.createElement("div",{className:"content-container blog-card"},e.blog.userHandle===e.userHandle&&r.a.createElement(f.a,{to:"../edit/".concat(e.blog.id)},r.a.createElement("button",null,"Edit")),r.a.createElement("h2",null,e.blog.title),r.a.createElement("div",{className:"blog-card__by"},r.a.createElement("img",{src:e.blog.userImageUrl,alt:""})," ",r.a.createElement(f.a,{to:"../user/".concat(e.blog.userHandle)},r.a.createElement("p",null,r.a.createElement(g.a,{icon:E.h,color:"salmon"})," ",e.blog.userHandle)),r.a.createElement("p",null,r.a.createElement(g.a,{icon:E.d,color:"salmon"}),"  ",m()(e.blog.createdAt).format("Do MMM YYYY"))),r.a.createElement("div",null,r.a.createElement("img",{src:e.blog.imageUrl,alt:""})),r.a.createElement("div",null,r.a.createElement("p",null,e.blog.description)),u?r.a.createElement("button",{className:"btn-secondary like-review",onClick:function(){e.unLikeBlog(d).then(function(){c(o-1),s(!1)})}},"Unlike"):r.a.createElement("button",{className:"btn-primary like-review",onClick:function(){e.likeBlog(d).then(function(){c(o+1),s(!0)})}},r.a.createElement(g.a,{icon:E.f}),u?o+" you liked this blog!":o),r.a.createElement(ne,{commentCount:e.blog.commentCount,id:d}))}),re=Object(u.b)(function(e){return{error:e.auth.error?e.auth.error:[],loading:e.auth.loading}},function(e){return{startSignUp:function(t){return e(function(e){return function(t){t({type:"LOADING_UI"}),y.a.post("/signup",e).then(function(e){U(e.data.token),t(I()).then(function(){t(k()).then(function(){t({type:"LOGIN"}),t({type:"UNLOADING_UI"})}),t(N()).then(function(){})})}).catch(function(e){console.log(e.response),t({type:"SET_ERRORS",error:e.response?e.response.data.general||e.response.data.email||e.response.data.password:""})})}}(t))},setUIErrors:function(t){return e({type:"SET_ERRORS",error:t})},unsetError:function(){return e({type:"SET_ERRORS",error:""})}}})(function(e){var t,n=e.startSignUp,o=e.error,c=e.setUIErrors,l=e.loading,i=e.unsetError,u=Object(a.useState)(""),s=Object(O.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(""),E=Object(O.a)(f,2),g=E[0],b=E[1],h=Object(a.useState)(""),p=Object(O.a)(h,2),v=p[0],_=p[1],y=Object(a.useState)(""),N=Object(O.a)(y,2),w=N[0],j=N[1],S=Object(a.useState)(""),U=Object(O.a)(S,2),I=U[0],k=U[1],L={};return r.a.createElement("div",{className:"box-layout"},l&&r.a.createElement("div",{class:"spinner"}),r.a.createElement("div",{className:"box-layout__signup-box animated fadeInDown delay-1s"},r.a.createElement(V.a,{className:"Tilt",options:{max:25}},r.a.createElement("h1",{className:"box-layout__title animated flash delay-2s"},"Blogacy")),r.a.createElement("h2",{className:"box-layout__subtitle"},"Read, Write and Grow"),r.a.createElement("div",{className:"box-layout__form"},o.length>0&&(o&&alert(o),void i()),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("yolo"),K()(m)?L.email=m:t="invalid Email",g===w?(L.password=g,L.confirmPassword=w):t="password and confirm password does not match",0!==I.length?L.name=I:t="Please provide a name",0!==v.length?L.userHandle=v:t="Please provide a User Handle",t?(console.log(t),c(t)):n(L)}},r.a.createElement("input",{type:"text",value:v,placeholder:"Enter your user Handle",onChange:function(e){return _(e.target.value)}}),r.a.createElement("input",{type:"email",value:m,placeholder:"email",onChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{type:"password",value:g,placeholder:"Password",onChange:function(e){return b(e.target.value)}}),r.a.createElement("input",{type:"password",value:w,placeholder:"confirm Password",onChange:function(e){return j(e.target.value)}}),r.a.createElement("input",{type:"text",value:I,placeholder:"Name",onChange:function(e){return k(e.target.value)}}),r.a.createElement("button",{className:"button button-primary"},"Sign Up")))))}),oe=Object(u.b)(function(e){return{user:e.auth.user}},function(e){return{addUserDetails:function(t){return e(function(e){return function(t){return y.a.post("/user",e).then(function(n){t(function(e){return{type:"ADD_USER_DETAILS",details:e}}(e)),le.goBack()}).catch(function(e){return console.log(e.response)})}}(t))},addUserImage:function(t){return e(function(e){return function(t){return t({type:"LOADING_UI"}),console.log(e),y.a.post("/user/image",e).then(function(e){return t({type:"ADD_USER_IMAGE",imageUrl:e.data}),t({type:"UNLOADING_UI"}),e.data}).catch(function(e){return console.log(e.response)})}}(t))}}})(function(e){var t=e.user,n=e.addUserDetails,o=e.addUserImage,c=Object(a.useState)(t.bio),l=Object(O.a)(c,2),i=l[0],u=l[1],s=Object(a.useState)(t.website),m=Object(O.a)(s,2),d=m[0],f=m[1],E=Object(a.useState)(t.imageUrl),g=Object(O.a)(E,2),b=g[0],h=g[1];return r.a.createElement("div",{className:"edit-user"},r.a.createElement("div",{className:"edit-user__image"},r.a.createElement("img",{src:b||t.imageUrl,alt:""}),r.a.createElement("input",{type:"file",hidden:"hidden",name:"",id:"imageChange",onChange:function(e){var t=e.target.files[0],n=new FormData;console.log(t),n.append("image",t,t.name),o(n).then(function(e){return h(e)})}}),r.a.createElement("button",{className:"button-secondary",onClick:function(){document.getElementById("imageChange").click()}},"change")),r.a.createElement("div",{className:"edit-user__contents"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({bio:i,website:d})}},r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement("h3",null,t.userHandle)),r.a.createElement("div",{className:"edit-user__contents-data"},r.a.createElement("div",null,r.a.createElement("label",null,"Bio:"),r.a.createElement("textarea",{cols:"30",rows:"1",value:i||t.bio,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"website:"),r.a.createElement("textarea",{cols:"30",rows:"1",value:d||t.website,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("button",{type:"submit"},"submit"))))}),ce=function(e){return r.a.createElement("div",{className:"user-details"},r.a.createElement(J,null))},le=Object(i.createBrowserHistory)(),ie=function(){return r.a.createElement(l.Router,{history:le},r.a.createElement(l.Switch,null,r.a.createElement(Q,{path:"/",component:W,exact:!0}),r.a.createElement(Q,{path:"/signup",component:re}),r.a.createElement(ee,{path:"/dashboard",component:D}),r.a.createElement(ee,{path:"/user",component:ce,exact:!0}),r.a.createElement(ee,{path:"/edit",component:oe,exact:!0}),r.a.createElement(ee,{path:"/myblogs",component:q}),r.a.createElement(ee,{path:"/user/:handle",component:q}),r.a.createElement(ee,{path:"/blog/:id",component:ae}),r.a.createElement(ee,{path:"/add",component:H}),r.a.createElement(ee,{path:"/edit/:id",component:M}),r.a.createElement(ee,{component:Y})))},ue=n(16),se=n(49),me=n(5),de=n(21),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BLOGS":return t.blogs;case"ADD_BLOG":return[].concat(Object(de.a)(e),[t.blog]);case"REMOVE_BLOG":return e.filter(function(e){return e.id!==t.id});case"GET_BLOG":return Object(de.a)(e);case"EDIT_BLOG":return e.map(function(e){return t.id===e.id?Object(me.a)({},e,t.update):e});case"LIKE_BLOG":var n=e.findIndex(function(e){return e.id===t.id});return e[n].likeCount+=1,e;case"UNLIKE_BLOG":var a=e.findIndex(function(e){return e.id===t.id});return e[a].likeCount-=1,e;default:return e}},Ee={isAuthenticated:!1,loading:!1,userHandle:"",userBlogs:[],user:{},notifications:[],follows:{following:[""],followers:[""]},checkLike:!1},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(me.a)({},e,{isAuthenticated:!0});case"LOGOUT":return{isAuthenticated:!1};case"GET_USERHANDLE":return Object(me.a)({},e,{userHandle:t.userHandle});case"GET_USER_BLOGS":return Object(me.a)({},e,{userBlogs:t.blogs.map(function(e){return e})});case"ADD_USER_IMAGE":return Object(me.a)({},e,{user:Object(me.a)({},e.user,{imageUrl:t.imageUrl})});case"ADD_USER_DETAILS":return Object(me.a)({},e,{user:Object(me.a)({},e.user,{bio:t.details.bio,website:t.details.website})});case"GET_AUTHENTICATED_USER":return Object(me.a)({},e,{user:t.user,notifications:t.notifications,follows:t.follows});case"CHECK_LIKE_BLOG":return Object(me.a)({},e,{checkLike:t.condition});case"LOADING_UI":return Object(me.a)({},e,{loading:!0});case"UNLOADING_UI":return Object(me.a)({},e,{loading:!1});case"SET_ERRORS":return Object(me.a)({},e,{loading:!1,error:t.error});case"CLEAR_ERRORS":return Object(me.a)({},e,{loading:!1,error:null});case"UNSET_AUTHENTICATED":return Object(me.a)({},e,{isAuthenticated:!1});default:return e}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return[].concat(Object(de.a)(e),[t.comment]);case"REMOVE_COMMENT":return e.filter(function(e){return e.id!==t.id});case"GET_COMMENTS":return t.comments;case"EDIT_COMMENT":return e.map(function(e){return t.id===e.id?Object(me.a)({},e,t.updates):e});default:return e}},he={text:"",sortBy:"likes"},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEXT_FILTER":return Object(me.a)({},e,{text:t.text});case"SORT_BY_LIKES":return Object(me.a)({},e,{sortBy:"likes"});case"SORT_BY_DATE":return Object(me.a)({},e,{sortBy:"date"});default:return e}},ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,Oe=n(50),_e=n.n(Oe),ye=(n(91),n(92),n(93),Object(ue.e)(Object(ue.c)({blogs:fe,auth:ge,comments:be,filters:pe}),ve(Object(ue.a)(se.a)))),Ne=r.a.createElement(u.a,{store:ye},r.a.createElement(ie,null)),we=!1,je=function(){we||(c.a.render(Ne,document.getElementById("root")),we=!0)};c.a.render(r.a.createElement("p",null,"Loading..."),document.getElementById("root"));var Se=sessionStorage.getItem("FBIdToken");Se?1e3*_e()(Se).exp<Date.now()?(ye.dispatch({type:"LOGOUT"}),je(),le.push("/")):(ye.dispatch({type:"LOGIN"}),y.a.defaults.headers.common.Authorization=Se,ye.dispatch(I()),ye.dispatch(k()),ye.dispatch(N()).then(function(){je(),"/"===le.location.pathname&&le.push("/dashboard")})):je();"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.3561c4db.chunk.js.map